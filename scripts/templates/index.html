<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{META_TITLE}}</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="css/style.css">
    <script>
    // View Transitions: only keep view-transition-names for the target section
    var SLUG_MAP = {{SLUG_MAP}};
    addEventListener('pageswap', function(e) {
      if (!e.viewTransition) return;
      var url = e.activation?.entry?.url;
      if (!url) return;
      var seg = new URL(url, location.origin).pathname.replace(/\/+$/,'').split('/').pop();
      var sectionNum = SLUG_MAP[seg];
      if (!sectionNum) return;
      var num = String(sectionNum).padStart(2, '0');
      document.querySelectorAll('[style*="view-transition-name"]').forEach(function(el) {
        if (!el.style.viewTransitionName.includes('section-' + num + '-')) {
          el.style.viewTransitionName = 'none';
        }
      });
    });
    </script>
</head>
<body>

    <header class="home-header">
        <div class="home-header__title-block">
            <span class="mono-label">Technical Report</span>
            <h1 class="home-header__title">{{META_TITLE}}</h1>
            <div class="home-header__attribution">
                <span>by {{META_AUTHOR}}</span>
                <span>&middot;</span>
                <a href="{{META_SITE_URL}}" target="_blank" rel="noopener">{{META_SITE}}</a>
                <span>&middot;</span>
                <a href="{{META_TWITTER_URL}}" target="_blank" rel="noopener">{{META_TWITTER}}</a>
            </div>
        </div>

        <div class="home-header__meta">
            <div class="meta-item">
                <span class="mono-label">Subject</span>
                <span class="meta-item__value">{{META_SUBJECT}}</span>
            </div>
            <div class="meta-item">
                <span class="mono-label">Date</span>
                <span class="meta-item__value">{{META_DATE}}</span>
            </div>
            <div class="meta-item">
                <span class="mono-label">Sections</span>
                <span class="meta-item__value meta-item__value--large">{{META_SECTION_COUNT}}</span>
            </div>
        </div>
    </header>

    <main class="sections-grid">
{{CARDS}}
    </main>

</body>
</html>
